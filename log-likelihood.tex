\documentclass{article}

\newcommand\inv[1]{#1\raisebox{1.15ex}{$\scriptscriptstyle-\!1$}}

\begin{document}

  \begin{equation}
    Q_{ff} = K_{fu}  \inv{K_{uu}}  K_{uf}
  \end{equation}

  \begin{equation}
    \frac{\partial Q_{ff}}{\partial \theta} =
      K_{fu}  \frac{\partial {\inv{K_{uu}}  K_{uf}}}{\partial \theta} +
      {\frac{\partial K_{fu}}{\partial \theta}}  {\inv{K_{uu}}  K_{uf}}
  \end{equation}
  \begin{equation}
    \frac{\partial Q_{ff}}{\partial \theta} =
      K_{fu}  \Big[ \inv{K_{uu}}  \frac{\partial K_{uf}}{\partial \theta}  -
        (\inv{K_{uu}}  \frac{\partial K_{uu}}{\partial \theta}  \inv{K_{uu}})  K_{uf}
        \Big] +
        \frac{\partial K_{fu}}{\partial \theta}  \inv{K_{uu}}  K_{uf}
  \end{equation}
  \begin{equation}
    \frac{\partial Q_{ff}}{\partial \theta} =
      K_{fu}  \inv{K_{uu}}  \big[ \frac{\partial K_{uf}}{\partial \theta}  -
        (\frac{\partial K_{uu}}{\partial \theta}  \inv{K_{uu}})  K_{uf}
        \big] +
        \frac{\partial K_{fu}}{\partial \theta}  \inv{K_{uu}}  K_{uf}
  \end{equation}

  \begin{equation}
    R = Q_{ff} + diag[{K_{ff} - Q_{ff}}] + \sigma^{2}_{noise} I
  \end{equation}

  \begin{equation}
    \frac{\partial R}{\partial \theta} = \frac{\partial Q_{ff}}{\partial \theta}
    + diag[\frac{\partial K_{ff}}{\partial \theta}]
    - diag[\frac{\partial Q_{ff}}{\partial \theta}]
    + \frac{\partial \sigma^{2}_{noise}}{\partial \theta}
  \end{equation}

  \begin{equation}
    log(y | X) = -\frac{1}{2}log | R | -  \frac{1}{2} \textbf{y}^\top \inv{R} \textbf{y}
    - \frac{n}{2} log(2 \pi)
  \end{equation}


  \begin{equation}
    \frac{\partial log(y | X)}{\partial \theta} =
    - \frac{1}{2} tr \Big(\inv{R} \frac{{\partial R}}{\partial \theta} \Big)
    + \frac{1}{2} \textbf{y}^{\top} \inv{R} \frac{\partial R}{\partial \theta} \inv{R} \textbf{y}
  \end{equation}
\end{document}
